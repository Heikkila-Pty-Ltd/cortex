# Cortex Interactive - Fast-tick orchestrator for workflows and tasks
# Triggered by Chief Scrum Master (Hex), executes via agents

[general]
tick_interval = "15s"
max_per_tick = 1
max_concurrent_coders = 1
max_concurrent_reviewers = 1
max_concurrent_total = 1
stuck_timeout = "10m"
max_retries = 2
log_level = "info"
state_db = "~/.local/share/cortex-interactive/cortex.db"
lock_file = "/tmp/cortex-interactive.lock"

# Interactive workflows project (workspace-main)
[projects.workflows]
enabled = true
beads_dir = "~/.openclaw/workspace-main/.beads"
workspace = "~/.openclaw/workspace-main"
priority = 0
matrix_room = "!adJhqAxLcYqQuYraGf:vmi3041112.contaboserver.net"

# Rate limits - separate budget from dev
[rate_limits]
window_5h_cap = 100
weekly_cap = 1000
weekly_headroom_pct = 80

# Providers - must specify cli tool for each
[providers.codex]
tier = "fast"
authed = true
model = "gpt-5.3-codex"
cli = "codex"

[providers.codex-balanced]
tier = "balanced"
authed = true
model = "gpt-5.3-codex"
cli = "codex"

# Tier mappings - which providers for each complexity
[tiers]
fast = ["codex"]
balanced = ["codex-balanced"]
premium = ["codex-balanced"]

# API on different port to avoid collision with cortex-dev
[api]
bind = "127.0.0.1:8901"

# Reporter - notify on completion
[reporter]
channel = "matrix"
agent_id = "main"
matrix_bot_account = "spritzbot"
default_room = "!adJhqAxLcYqQuYraGf:vmi3041112.contaboserver.net"

# Health settings - faster detection for interactive
[health]
check_interval = "30s"
stuck_threshold = "10m"
gateway_user_service = true

# Dispatch configuration
[dispatch.cli.codex]
cmd = "codex"
prompt_mode = "stdin"
args = ["exec", "--full-auto"]
model_flag = "-m"
approval_flags = []

[dispatch.routing]
fast_backend = "headless_cli"
balanced_backend = "headless_cli"
premium_backend = "headless_cli"
comms_backend = "headless_cli"
retry_backend = "headless_cli"

[dispatch.timeouts]
fast = "10m"
balanced = "30m"
premium = "60m"

[dispatch.git]
max_concurrent_per_project = 1

[dispatch.tmux]
history_limit = 50000
session_prefix = "cortex-int-"
